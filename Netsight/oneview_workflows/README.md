# How To
## Workflows are available from XMC version 8.1.5 as beta feature. Fully supported in XMC version 8.2 GA
* Import the sctript = In the Extreme Management Center OneView -> Tasks -> Workflow -> Import...

# Extreme Management Center Reporting Workflows
| Workflow name | Description | Comment | Version |
| ------------- | ----------- | ------- | ------- |
|[Aggregated report Device Down](xwf/Aggregated_report_Device_Down-8.4.3.24v17.xwf?raw=true)|This workflow creates aggregated report over the time. Instead of 300 emails if 300 devices goes down, you will get one email with list of 300 devices.|Create Alarm for Device Down based on contact lost and as action assign this workflow. You can define the aggregation time in minutes in the workflow Input. Define email recipients.|8.4.3.24v17|
|[Link Aggregate Alarm](xwf/Link_Aggregate_Alarm-8.4.0.115v8.xwf?raw=true)|This workflow creates one email for each link down event. Instead of 2 emails if link goes down, you will get one email with all link details.|Create Alarm for Link Down based on selected trap (you can copy or modify original alarm) and as action assign this workflow. Define email recipients.|8.4.0.115v8|
|[ERS inventory](xwf/ERS_Devices_Report-8.4.2.30v111.xwf?raw=true)|This workflow creates one email with CSV file attached. All ERS devices are there with IP, serial numbers and many details.|Select ERS devices. Check your ERS devices do have defined Network OS.|8.4.2.30v111|
|[ERS port counters](xwf/ERS_por_counters_report-8.4.2.38v39.xwf?raw=true)|This workflow creates one email with CSV file attached. Ports with defined property above defined threshold are in the list.|Select ERS devices. Define property (e.g. Dropped on no resources), define threshold (e.g. 0), define email address.|8.4.2.38v39|
|[Open ServiceNow Ticket](xwf/Open_ServiceNow_Ticket-8.4.2.38v3.xwf?raw=true)|This workflow creates ticket in ServiceNow through the API call based on alarm.|Define variables for ServiceNow (Instance, credentials, queue, priority). Create alarm to trigger this worfklow.|8.4.2.38v3|
|[Aggregated Report Alarm History](xwf/Aggregated_Report_Alarm_History-8.4.3.24v28.xwf?raw=true)|This workflow creates aggregated csv report of alarm history. Columns in CSV file are AlarmName, Source, Subcomponent, Occurence.|The workflow can be executed or scheduled. You can define the aggregation time in seconds in the workflow Input. Define email recipients.|8.4.3.24v28|

# Extreme Management Center Troubleshooting Workflows
| Workflow name | Description | Comment | Version |
| ------------- | ----------- | ------- | ------- |
|[Uptime and Tech Support](xwf/Uptime_and_Tech_Support-8.4.0.115v87.xwf?raw=true)|Checks the uptime of each device (families: Wireless Controller, VSP, Summit Series, Catalyst, Extreme Access Series, VDX). If the uptime is lower then configured value and the device is not in maintenance then the workflow gathers tech support information and send email.|Add XMC to devices with proper CLI credentials. Configure variables and email destination.|8.4.0.115v87|
|[Gather Show Support](xwf/Gather_Show_Support-8.4.3.24v29.xwf?raw=true)|Workflow gathers show support information from devices (families: Wireless Controller, VSP, Summit Series, Catalyst, Extreme Access Series, VDX, SLX). Workflow should be executed by alarm or with right click on the device. Workflow genearates email with tech support attached.|Configure the email destination. Create Alarm to execute this workflow. Add XMC to the database with CLI credentials or define XMC credentials in variables.|8.4.3.24v29|

# Extreme Management Center Provisioning Workflows
| Workflow name | Description | Comment | Version |
| ------------- | ----------- | ------- | ------- |
|[Export Site Structure](xwf/Export_Sites-8.4.1.24v1.xwf?raw=true)|Exports Site structure to the file or email.|Inputs: FileName including full path, email address is optional.|8.4.1.24v1|
|[Import Site Structure](xwf/Import_Sites-8.2.5.50v2.xwf?raw=true)|Automatically creates sites and subsites based on input file|Inputs: [File with site names](xwf/Import_Sites_Sites2Create.txt?raw=true). Parent site must exist.|8.2.5.50v2|
|[Import Devices](xwf/Import_Devices-8.2.6.5v3.xwf?raw=true)|Import devices to the database based on input file|Inputs: [File with devices](xwf/Import_Devices.txt?raw=true). The file contains IP,NickName,Site,Profile. The workflow finishes quickly, added devices will start to appear in the XMC sequentially.|8.2.6.5v3|
|[Import VLANs](xwf/Import_VLANs_to_Site-8.3.0.106v3.xwf?raw=true)|Import VLANs to the Site based on input file|Inputs: [File with VLANs](xwf/Import_VLANs_to_Site.txt?raw=true). The file contains VlanID,VlanName. Chose method ADD (fails if the vlan exist) or REPLACE (if does not exist then it creates the vlan). Specify the Site.|8.3.0.106v3|
|[Import VRFs and VLANs and Services from VSP](xwf/Import_VLANs_and_Services_from_VSP-8.4.0.107v37.xwf?raw=true)|Workflow reads VRFs, VLANs, L2VSN, L3VSN from VSP and import it to Service Defintions.|Inputs: Service Application, VSP device or XA. The Service Definition is determined automatically = VSP must be assigned to the site with Service Definition.|8.4.0.107v37|
|[Import End-Systems to XCA](xwf/Import_CSV_to_XCA_ES_group-8.3.0.111v4.xwf?raw=true)|This workflow reads the CSV file with MACs and descriptions. The workflow injects the content of the CSV file to end-system group in Extreme Cloud Appliance through the API. The XCA must be in XMC and must have CLI credentials defined. The end-system group must exist. Maximum number of entries in one run is 100 for XCA verion 04.36.02.0014 |Inputs: [File with End-systems](xwf/Import_CSV_to_XCA_ES_group.txt?raw=true). The file contains MAC,description.|8.3.0.111v4|
|[Import L2VSNs to XMC](xwf/Import_L2VSNs-8.3.1.9v7.xwf?raw=true)|Imports VLANs and L2VSNs from file to XMC Service Definitions and Service Applications. If Service Definition does not exist then it is created. If Service Application does not exist then it is created. If Vlan ID exists then it is updated. If NSI exists then it is updated. The goal is: You do not need to manually create each VLAN and ISID in XMC.|Inputs: [File with Services](xwf/Import_L2VSNs_Services2Create.txt?raw=true)|8.3.1.9v7|
|[Create Device Groups from Sites](xwf/Create_Device_Groups_from_Sites-8.4.0.115v25.xwf?raw=true)|Based on the Site structure user groups will be created. Workflow stops if there is a name conflict: if group with the same name already exists. Backup of the XMC is strongly recommended before the workflow execution.|Name of each site must be unique. Restart of XMC is mandatory after the workflow execution.|8.4.0.115v25|
|[Change EXOS policy Rule model](xwf/Change_EXOS_policy_model-8.4.3.10v29.xwf?raw=true)|This workflow adress incompatibility of EXOS 30.5 with Policy Manager in XMC 8.4 and older. [KB article](https://gtacknowledge.extremenetworks.com/articles/Solution/xmc-Policy-enforce-is-failing-to-EXOS-switches-running-30-5-x-15-firmware-after-upgrading-to-v8-4-x/). The workflow can be executed through ZTP+ process or manualy.|CLI access must work, Policy domain must be assigned. [ZTP+ settings](xwf/Change_EXOS_policy_mode_ZTP_configuration.PNG)|8.4.3.10v29|
|[ZTP+ Remove Redundant IPs](xwf/Remove_redundant_IPs-8.4.2.38v1.xwf?raw=true)|During the ZTP+ process the switch can learn multip IPs from the DHCP server. This workflow can be executed after the EXOS device is onboarded and it does remove IPs from EXOS not registered in XMC.|Configure Site Actions to execute this workflow as part of ZTP+ process.|8.4.2.38v1|



# Extreme Management Center daily job Workflows
| Workflow name | Description | Comment | Version |
| ------------- | ----------- | ------- | ------- |
|[Send System Time by Email](xwf/Send_SystemTime_by_Email-8.2.1.56v22.xwf?raw=true)|Gather system time from group of EXOS devices sequentially and aggregated result is sent by email.|Configure the email recipients before executing.|8.2.1.56v22|
|[Update Device Notes - Group Membership](xwf/Update_Device_Notes-Group_Membership-8.2.4.24v13.xwf?raw=true)|The workflow does modify device property to reflect groups the device belong to.|Modify the Inputs to define what property you want to modify and what prefix you want to use. Run the workflow and save it as task. Schedule the task for periodic execution.|8.2.4.24v13|
|[Assign Device to User Device Group based on SysObjectID](xwf/Assign_Device_to_UserGroup-8.2.5.50v4.xwf?raw=true)|Automatically assigns device to the user device group based on SysObjectID. All devices of the same type will be in the same user device group.|Inputs:[File with mapping](xwf/Assign_Device_to_UserGroup_SysObjectID2Group.csv?raw=true), SOAP credentials. User device group must exist. Workflow can be executed automatically by Alarm (new device added). Workflow can be executed manually or scheduled.|8.2.5.50v4|
|[Assign Device to User Device Group based on site](xwf/Assign_the_Device_to_User_Device_Group-8.4.0.115v3.xwf=true)|Automatically assigns device to the user device group based on site.|Define SOAP credentials. User device group must exist (Use workflow "Create Device Groups from Sites" to create the user group structure.). Workflow can be executed manually or scheduled or part of the site actions. Multiple devices can be processed by one run.|8.4.0.115v3|
|[Synchronize Vlans on Catalyst](xwf/Synchronize_Vlans_on_Catalyst-8.4.3.24v19.xwf?raw=true)|This workflow creates VLANs on the Cisco Catalyst switch based on Site and Services vlan configuration. The workflow deletes VLANs from the switch if the VLAN does not exist in the Site nor in the Services definition. The workflow renames VLAN name to match the Site or Services.|If a change has been made, the event is generated and configuration is saved.|8.4.3.24v19|
|[Synchronize Vlans on ERS](xwf/Synchronize_Vlans_on_ERS-8.4.1.23v20.xwf?raw=true)|This workflow creates VLANs on the ERS switch based on combination of Site and Services vlan configuration. The workflow deletes VLANs from the switch if the VLAN does not exist in the Site nor in the Services definition. The workflow renames VLAN name to match the Site or Services.|If a change has been made, the event is generated.|8.4.1.23v20|
|[Synchronize Vlans on HPE](xwf/Synchronize_Vlans_on_HP-8.4.3.24v2.xwf?raw=true)|This workflow creates VLANs on the HPE switch based on Site and Services vlan configuration. The workflow deletes VLANs from the switch if the VLAN does not exist in the Site nor in the Services definition. The workflow renames VLAN name to match the Site or Services.|If a change has been made, the event is generated and configuration is saved.|8.4.3.24v2|
|[Synchronize Vlans on ISW](xwf/Synchronize_Vlans_on_ISW-8.4.3.24v6.xwf?raw=true)|This workflow creates VLANs on the ISW switch based on combination of Site and Services vlan configuration. The workflow deletes VLANs from the switch if the VLAN does not exist in the Site nor in the Services definition. The workflow renames VLAN name to match the Site or Services.|If a change has been made, the event is generated.|8.4.3.24v6|
|[Disable unused ports](xwf/Disable_unused_ports-8.4.4.26v65.xwf?raw=true)|If the port is unused for more than X days then the port is set to Admin-Down state and ifAlias is configured. On EXOS and BOSS and FastPath and ISW devices there is option to save the configuration.|Variable PortDescription defines the ifAlias prefix. Custom Inputs: Topology roles delimited by comma (XMC version 8.3 the roles are numbers starting from 0, XMC version 8.4 roles are "L2 Leaf,L2 Access,...", how many days should be the port down before workflow takes the action, if you do want to save the changed configuration. What sites and subsites you want this workflow to execute. You can schedule the workflow execution in task scheduler.|8.4.4.26v65|
|[Refresh Neighbor Devices](xwf/Refresh_Neighbor_Devices-8.2.4.55v2.xwf?raw=true)|This workflow checks neighbor devices based on XMC link database and executes refresh of each neighbor. If the device goes down or up then the map is automatically updated.|Create Status Change Alarm and for both contact lost and contact established add action run task with this workflow. |8.2.4.55v2|

# Extreme Management Center NAC-related Workflows
| Workflow name | Description | Comment | Version |
| ------------- | ----------- | ------- | ------- |
|[Delete end-system from ExtremeControl](xwf/GDPR-Delete_End-System-8.2.4.41v6.xwf?raw=true)|This workflow deletes End-System with specified MAC from the database. Can help with implementation of GDPR "Right to be forgoten".|Various MAC address formats are accepted: lowercase, uppercase, dot delimited, colon delimited, dash delimited, not delimited|8.2.4.41v6|
|[Delete from ExtremeControl](xwf/GDPR-Delete-8.2.4.41v4.xwf?raw=true)|This workflow deletes End-System with specified MAC or Username from the database. Can help with implementation of GDPR "Right to be forgoten".|Various MAC address formats are accepted: lowercase, uppercase, dot delimited, colon delimited, dash delimited, not delimited. Domain is not mandatory in the username.|8.2.4.41v4|
|[Investigate End-System History](xwf/Investigate_End-System_history-8.2.5.50v48.xwf?raw=true)|Workflow generates email with details from end-system history based on defined criteria.|Input:MAC or Username, Date range. Define email recepients before use.|8.2.5.50v48|
|[Remove all End-Systems from group](xwf/Clear_End-Systems_in_the_group-8.3.1.9v12.xwf?raw=true)|This workflow removes all end-systems from end-system group. It can be scheduled to execute periodically.|Define end-system group in variable "EndSystemGroup" default end-system group: "Access Expired".|8.3.1.9v12|
|[Investigate End-System history](xwf/Investigate_End-System_history-8.2.5.50v48.xwf?raw=true)|Prompt for MAC or Username and for time range. Workflow creates table of end-system events in the database and send it by email.|Configure the email recipients before executing. Variable InstallDirectory is referring to the XMC installation path.|8.2.5.50v48|
|[Import credentials from MySQL to local repository](xwf/MySQL-2-LocalRepository-8.4.0.115v13.xwf?raw=true)|Workflow connects to external MySQL server and read usernames and passwords. These are then injected to the local password repository. Can be executed once, can be scheduled.|Input:SQL server, SQL username, SQL password, SQL database, SQL table, Column with username, Column with password.|8.4.0.115v13|
|[RFC3580 for ISW through CLI](xwf/RFC3580_for_ISW_and_MACauth_through_CLI-8.4.2.38v11.xwf?raw=true)|This workflow delivers missing RFC3580 feature on the ISW for Macauth. If it is mac authentication then it configures on the switch vlan based on authorization VLAN in the radius response. The configuration is done through ssh/telnet. When the end-system is disconnected it returns the port vlan to default.|Define disconnected PVID. Create 2 notification rules. [State Change](xwf/RFC3580_for_ISW_and_MACauth-Rule1.PNG) and [New End-System Added](xwf/RFC3580_for_ISW_and_MACauth-Rule2.PNG).|8.4.2.38v11|
|[RFC3580 for ISW through SNMP](xwf/RFC3580_for_ISW_and_MACauth_through_SNMP-8.4.2.38v2.xwf?raw=true)|This workflow delivers missing RFC3580 feature on the ISW for Macauth. If it is mac authentication then it configures on the switch vlan based on authorization VLAN in the radius response. The configuration is done through SNMP. When the end-system is disconnected it returns the port vlan to default.|Define disconnected PVID. Create 2 notification rules. [State Change](xwf/RFC3580_for_ISW_and_MACauth-Rule1.PNG) and [New End-System Added](xwf/RFC3580_for_ISW_and_MACauth-Rule2.PNG).|8.4.2.38v2|
|[Limit number of End-Systems with the same Username](xwf/Limit_ES_with_same_Username-8.4.2.38v2.xwf?raw=true)|The workflow reads all end-systems and process only those in Accept state. If the number of end-systems with the same name is higher than threshold then one of following will happen: UserName can be added to defined User Group and all end-systems are reauthenticated. All MACs for that username are added to defined ES group and all those end-systems are reauthenticated. Only older MACs for that username are added to defined ES group and are reauthenticated.|Define number of allowed end-systems with the same username, action what will happen, group to add MACs/Username. Schedule the workflow execution.|8.4.2.38v2|


# Extreme Management Center Workflow Combinations
| Name | Workflows | Description | How To | Version |
| ---- | --------- | ----------- | ------ | ------- |
|User authenticated on domain computer|[Add MAC to Domain Computers](combo/UserAndComputer/Add_MAC_to_Domain_Computers-8.3.1.9v3.xwf?raw=true), [Clear old End-Systems in the group](combo/UserAndComputer/Clear_old_End-Systems_in_the_group-8.3.1.9v5.xwf?raw=true)|"Add MAC to Domain Computers" is executed when computer authenticates. The MAC address is added to End-System and timestamp is created (updated). Consequent User authentication can be combined with condition of End-System group. "Clear old End-Systems in the group" checks if the timestamp is older than X hours and old End-Systems are deleted from the group.|Create End-System group "Domain Computers". Create User Group [Username starts with host/](combo/UserAndComputer/UserGroup.PNG). Create notification [Domain authentication - after logoff](combo/UserAndComputer/Notification1.PNG). Create notification [Domain authentication - after boot](combo/UserAndComputer/Notification2.PNG). Configure inputs for workflows. Schedule the workflow execution to clean old end-systems from End-Systems group. Create [NAC rule](combo/UserAndComputer/Rule.PNG)|8.3.1.9v3 8.3.1.9v5|
|Add NSI to Vlan Egress = After Policy Enforcement|[Run Add NSI After Policy Enforcement](combo/AddNSIprefix/Run_Add_NSI_After_Policy_Enforcement-8.4.0.107v11.xwf?raw=true), [Add NSI prefix to vlan egress](combo/AddNSIprefix/Add_NSI_prefix_to_vlan_egress-8.3.1.9v35.xwf?raw=true)|There maybe tagged egress vlans in the policy profiles. This workflow ensures these egress vlans are mapped to proper NSI on EXOS switch. This check is executed on each reachable device in the policy domain, when the enforce is completed.|Import both workflows. The "Run Add NSI After Policy Enforcement" should be executable by [Alarm](combo/AddNSIprefix/Alarm.png). Configure the [path](combo/AddNSIprefix/WorkflowPath.png) to the "Add NSI prefix to vlan egress" workflow. [Create Alarm](combo/AddNSIprefix/AlarmDefinition.png) to execute the workflow if the policy domain is enforced. Create [topology](combo/AddNSIprefix/Topology.png) if you do not have any. Create [Service and Application](combo/AddNSIprefix/Applications.png). Assign [Topology](combo/AddNSIprefix/SiteTopology.png) to the Site. Assign [Service](combo/AddNSIprefix/SiteService.png) Definition to the Site.|8.4.0.107v11 8.3.1.9v35|
|IGE Governance Regime|[Governance Regime Export](combo/GovernanceEngine/Governance_Regime_Export-8.4.1.23v7.xwf?raw=true), [Governance Regime Import](combo/GovernanceEngine/Governance_Regime_Import-8.4.1.23v4.xwf?raw=true)|Governance Regime can be exported and then imported to other XMC instance. You can share your regime with the community. Professionals can share regimes with their customers.|You may need modify the InstallDirectory variable. During the Export you need to specify name of the regime. The regime is exported to the file system InstallDirectory/GovernanceEngine/audit-tests/ as tgz file. The export workflow can email the regime. Transfer the file to the new system. During the import select if imported tests will be marked read only or editable.|8.4.1.23v7 8.4.1.23v4|

# Extreme Management Center Extreme Fabric Automation Workflows
| Workflow Name | Description | How To | Version |
| ------------- | ----------- | ------ | ------- |
|[Day 0 Create Fabric](xwf/EFA_1_Create_Fabric-8.4.2.38v12.xwf?raw=true)|Creates Fabric through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v12|
|[Day 1 Create Tenant](xwf/EFA_2_Create_Tenant-8.4.2.38v10.xwf?raw=true)|Creates Tenant through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v10|
|[Day 1 Create EPG](xwf/EFA_3_Create_EPG-8.4.3.24v8.xwf?raw=true)|Creates VRF, Port Channels, EndPointGroup through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress, PortChannelSpeed, PortChannelNegotiation, PoName to reflect your environment.|8.4.3.24v8|
|[Day 2 Add Ports to Tenant](xwf/EFA_Add_Tenant_Ports-8.4.2.38v8.xwf?raw=true)|Adds ports to existing Tenant through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v8|
|[Day 2 Add Ports to EPG](xwf/EFA_Add_EPG_Ports-8.4.2.38v11.xwf?raw=true)|Adds ports to existing EndPointGroup through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress, PortChannelSpeed, PortChannelNegotiation to reflect your environment.|8.4.2.38v11|
|[Day 2 Create PortChannel](xwf/EFA_Create_PO-8.4.2.38v10.xwf?raw=true)|Creates PortChannel through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress, PortChannelSpeed, PortChannelNegotiation to reflect your environment.|8.4.2.38v10|
|[Day 2 Create VRF](xwf/EFA_Create_VRF-8.4.3.24v5.xwf?raw=true)|Creates VRF through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.3.24v5|
|[Day 2 Delete Fabric](xwf/EFA_Delete_Fabric-8.4.2.38v2.xwf?raw=true)|Workflow deletes existing Fabrics through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v2|
|[Day 2 Delete Tenant](xwf/EFA_Delete_Tenant-8.4.2.38v2.xwf?raw=true)|Workflow deletes existing Tenants through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v2|
|[Day 2 Delete PortChannel](xwf/EFA_Delete_PO-8.4.2.38v2.xwf?raw=true)|Workflow deletes existing Port Channels through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v2|
|[Day 2 Delete VRF](xwf/EFA_Delete_VRFs-8.4.2.38v2.xwf?raw=true)|Workflow deletes existing VRFs through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v2|
|[Day 2 Delete EPG](xwf/EFA_Delete_EPG-8.4.2.38v3.xwf?raw=true)|Workflow deletes existing EPGs through Extreme Fabric Automation.|EFA must be in the XMC with valid CLI credentials. Modify variable EFAaddress to reflect your environment.|8.4.2.38v3|
|[Whole EFA package](xwf/EFA.zip?raw=true)|All EFA workflows zipped to one package.|Unzip and import.| - |


# Support
_The software is provided as-is and [Extreme Networks](http://www.extremenetworks.com/) has no obligation to provide maintenance, support, updates, enhancements, or modifications. Any support provided by [Extreme Networks](http://www.extremenetworks.com/) is at its sole discretion._

Issues and/or bug fixes may be reported on [The Hub](https://community.extremenetworks.com).
>Be Extreme
